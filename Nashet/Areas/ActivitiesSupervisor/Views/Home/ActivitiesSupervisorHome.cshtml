@model IList<AnnouncementViewModel>
@{
    Layout = "~/Areas/ActivitiesSupervisor/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "الرئيسية";
}

<!-- Start Page Wrap -->
<section class="page_wrap">
    <div class="page_content">
        <div class="row justify-content-md-center mb-3">
            <div class="col">
                <!-- Announcement Banner -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="block mb-4">
                            <div class="block-header border-bottom mb-3 p-3">
                                <h6 class="m-0">آخر الإعلانات</h6>
                            </div>

                            @if (Model == null || !Model.Any())
                            {
                                <div class="p-4 text-center">
                                    <i class="fas fa-bullhorn fa-3x mb-3 text-muted"></i>
                                    <h5 class="text-muted">لا يوجد إعلانات حالياً</h5>
                                    <p class="text-muted mb-0">سيتم عرض الإعلانات هنا عند توفرها</p>
                                </div>
                            }
                            else
                            {
                                <div id="announcementsCarousel" class="carousel slide" data-bs-ride="carousel" style="border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                    <!-- المؤشرات -->
                                    <div class="carousel-indicators">
                                        @for (int i = 0; i < Model.Count; i++)
                                        {
                                            <button type="button"
                                                    data-bs-target="#announcementsCarousel"
                                                    data-bs-slide-to="@i"
                                                    class="@(i == 0 ? "active" : "")"
                                                    aria-current="@(i == 0 ? "true" : "false")"
                                                    aria-label="Slide @(i + 1)"></button>
                                        }
                                    </div>

                                    <!-- slides -->
                                    <div class="carousel-inner">
                                        @foreach (var (announcement, index) in Model.Select((a, i) => (a, i)))
                                        {
                                            <div class="carousel-item @(index == 0 ? "active" : "")">
                                                <a href="@Url.Action("AnnouncementPage", "Announcement", new { area = "ActivitiesSupervisor", id = announcement.Guid })"
                                                   class="text-decoration-none">
                                                    <div class="announcement-slide" style="position: relative; height: 400px; overflow: hidden; cursor: pointer;">
                                                        <!-- background -->
                                                        @if (!string.IsNullOrEmpty(announcement.AnnouncementImage))
                                                        {
                                                            <div class="announcement-background"
                                                                 style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url('@announcement.AnnouncementImage'); background-size: cover; background-position: center; background-repeat: no-repeat; transition: transform 0.5s ease;">
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <div class="announcement-background"
                                                                 style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); transition: transform 0.5s ease;">
                                                            </div>
                                                        }

                                                        <!-- طبقة تدرج -->
                                                        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.6) 100%);"></div>

                                                        <!-- content -->
                                                        <div class="announcement-content" style="position: absolute; bottom: 0; left: 0; right: 0; padding: 2rem; color: white; z-index: 2;">
                                                            <div class="announcement-badge" style="margin-bottom: 1rem;">
                                                                <span class="badge" style="background-color: #0f7179; font-size: 0.8em; padding: 0.5em 1em;">@announcement.AnnouncementType</span>
                                                            </div>
                                                            <h3 class="announcement-title" style="font-size: 1.8rem; font-weight: bold; margin-bottom: 1rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">@announcement.AnnouncementTopic</h3>
                                                            <p class="announcement-details" style="font-size: 1.1rem; margin-bottom: 1rem; line-height: 1.6; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); max-height: 4.8em; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;">@announcement.AnnouncementDetails</p>
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>
                                        }
                                    </div>

                                    <!-- أزرار التحكم -->
                                    <button class="carousel-control-prev" type="button" data-bs-target="#announcementsCarousel" data-bs-slide="prev">
                                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                        <span class="visually-hidden">السابق</span>
                                    </button>
                                    <button class="carousel-control-next" type="button" data-bs-target="#announcementsCarousel" data-bs-slide="next">
                                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                        <span class="visually-hidden">التالي</span>
                                    </button>
                                </div>
                            }
                        </div>
                    </div>
                </div>

                <!-- أزرار الإجراءات -->
                <div class="row">
                    <div class="col-md-4">
                        <a asp-area="ActivitiesSupervisor" asp-controller="Activity" asp-action="InsertActivity" class="block layout_icons d-block mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#0f7179" class="bi bi-plus-circle" viewBox="0 0 16 16">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
                            </svg>
                            <h5 class="text-dark">إنشاء نشاط</h5>
                        </a>
                    </div>
                    <div class="col-md-4">
                        <a asp-area="ActivitiesSupervisor" asp-controller="Announcement" asp-action="InsertAnnouncement" class="block layout_icons d-block mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#0f7179" class="bi bi-megaphone" viewBox="0 0 16 16">
                                <path d="M13 2.5a1.5 1.5 0 0 1 3 0v11a1.5 1.5 0 0 1-3 0v-.214c-2.162-1.241-4.49-1.843-6.912-2.083l.405 2.712A1 1 0 0 1 5.51 15.1h-.548a1 1 0 0 1-.916-.599l-1.85-3.49a68.14 68.14 0 0 0-.202-.003A2.014 2.014 0 0 1 0 9V7a2.02 2.02 0 0 1 1.992-2.013 74.663 74.663 0 0 0 2.483-.075c3.043-.154 6.148-.849 8.525-2.199V2.5zm1 0v11a.5.5 0 0 0 1 0v-11a.5.5 0 0 0-1 0zm-1 1.35c-2.344 1.205-5.209 1.842-8 2.033v4.233c.18.01.359.022.537.036 2.568.189 5.093.744 7.463 1.993V3.85zm-9 6.215v-4.13a95.09 95.09 0 0 1-1.992.052A1.02 1.02 0 0 0 1 7v2c0 .55.448 1.002 1.006 1.009A60.49 60.49 0 0 1 4 10.065zm-.657.975 1.609 3.037.01.024h.548l-.002-.014-.443-2.966a68.019 68.019 0 0 0-1.722-.082z" />
                            </svg>
                            <h5 class="text-dark">إنشاء اعلان</h5>
                        </a>
                    </div>
                    <div class="col-md-4">
                        <a asp-area="ActivitiesSupervisor" asp-controller="Club" asp-action="InsertClub" class="block layout_icons d-block mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#0f7179" class="bi bi-people" viewBox="0 0 16 16">
                                <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" />
                            </svg>
                            <h5 class="text-dark">إنشاء نادي جديد</h5>
                        </a>
                    </div>
                    <div class="col-md-4">
                        <a asp-area="ActivitiesSupervisor" asp-controller="Activity" asp-action="ViewRequests" class="block layout_icons d-block mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#0f7179" class="bi bi-clipboard-check" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z" />
                                <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z" />
                                <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z" />
                            </svg>
                            <h5 class="text-dark">مراجعة الطلبات</h5>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section><!-- End Page Wrap -->
@section Scripts {
    <script>
        // تشغيل السلایدر تلقائياً
        document.addEventListener('DOMContentLoaded', function() {
            var myCarousel = document.getElementById('announcementsCarousel');
            if (myCarousel) {
                var carousel = new bootstrap.Carousel(myCarousel, {
                    interval: 5000, // تغيير كل 5 ثواني
                    wrap: true,
                    pause: 'hover'
                });

                // إضافة تأثير hover على الصور
                var announcementSlides = document.querySelectorAll('.announcement-slide');
                announcementSlides.forEach(function(slide) {
                    slide.addEventListener('mouseenter', function() {
                        var background = this.querySelector('.announcement-background');
                        if (background) {
                            background.style.transform = 'scale(1.05)';
                        }
                    });

                    slide.addEventListener('mouseleave', function() {
                        var background = this.querySelector('.announcement-background');
                        if (background) {
                            background.style.transform = 'scale(1)';
                        }
                    });
                });
            }
        });
    </script>

    <style>
        /* الأنماط الأساسية فقط */
        .carousel-indicators button {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin: 0 5px;
            background-color: rgba(255,255,255,0.5);
            border: 2px solid transparent;
        }

            .carousel-indicators button.active {
                background-color: white;
                border-color: #0f7179;
            }

        .carousel-control-prev,
        .carousel-control-next {
            width: 5%;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

            .carousel-control-prev:hover,
            .carousel-control-next:hover {
                opacity: 1;
            }

        /* التأكد من أن السلایدر متجاوب */
        @@media (max-width: 768px) {
            .announcement-slide {
                height: 300px !important;
            }

            .announcement-title {
                font-size: 1.4rem !important;
            }

            .announcement-details {
                font-size: 1rem !important;
                -webkit-line-clamp: 2 !important;
                max-height: 3.2em !important;
            }

            .announcement-content {
                padding: 1.5rem !important;
            }
        }

        @@media (max-width: 576px) {
            .announcement-slide {
                height: 250px !important;
            }

            .announcement-title {
                font-size: 1.2rem !important;
            }

            .announcement-details {
                font-size: 0.9rem !important;
                -webkit-line-clamp: 2 !important;
            }
        }
    </style>
}